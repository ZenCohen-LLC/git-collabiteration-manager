#!/bin/bash

# {{ITERATION_NAME}} Iteration Shutdown Script
# This script stops all services for the {{ITERATION_NAME}} iteration

echo "ğŸ›‘ Stopping {{ITERATION_NAME}} Iteration..."

# Navigate to the correct directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR/.."

# Stop frontend
echo "ğŸ¨ Stopping frontend..."
pkill -f "vite.*{{FRONTEND_PORT}}" 2>/dev/null || echo "   Frontend was not running"

# Stop backend
echo "ğŸ”§ Stopping backend..."
pkill -f "bun.*{{BACKEND_PORT}}" 2>/dev/null || echo "   Backend was not running"

# Stop database
echo "ğŸ—„ï¸  Stopping database..."
docker compose -f docker-compose.{{ITERATION_NAME}}.yml down

echo ""
echo "âœ… All services stopped"
echo ""
echo "ğŸ’¡ To restart, run: ./scripts/start-iteration.sh"